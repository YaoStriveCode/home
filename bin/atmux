#!/bin/sh
set -e

tmux_sessiondir=$HOME/.tmux-sessions

case "$COLORTERM" in
gnome-terminal)
    export TERM=xterm-256color
    ;;
esac

if [ $# -gt 0 ]; then
    tmux_session=$1
else
    tmux_session=default
fi

if ! tmux has-session -t $tmux_session; then
    if [ -f $tmux_sessiondir/$tmux_session ]; then
        .  $tmux_sessiondir/$tmux_session
    else
        tmux new-session -d -s $tmux_session
    fi
fi
exec tmux attach-session -t $tmux_session
